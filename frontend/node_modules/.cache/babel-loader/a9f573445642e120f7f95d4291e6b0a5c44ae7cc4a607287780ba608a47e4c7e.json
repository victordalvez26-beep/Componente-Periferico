{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\CaroH\\\\Documents\\\\fing\\\\TSE\\\\lab\\\\componente-periferico\\\\frontend\\\\src\\\\components\\\\ClinicAdmin.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ClinicAdmin() {\n  _s();\n  const [session, setSession] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [payload, setPayload] = useState('{ \"clinic\": \"Mi Clinica\", \"address\": \"Av. Siempreviva 123\" }');\n  const backendBase = process.env.REACT_APP_BACKEND_URL || 'http://localhost:8080/nodo-periferico';\n  useEffect(() => {\n    checkSession();\n  }, []);\n  async function checkSession() {\n    try {\n      const res = await fetch(`${backendBase}/api/auth/session`, {\n        credentials: 'include'\n      });\n      if (res.ok) {\n        const json = await res.json();\n        setSession(json);\n      } else {\n        setSession(null);\n      }\n    } catch (e) {\n      console.error(e);\n      setSession(null);\n    }\n  }\n  async function doLogout() {\n    await fetch(`${backendBase}/api/auth/logout`, {\n      credentials: 'include'\n    });\n    setSession(null);\n  }\n  async function sendAlta() {\n    setLoading(true);\n    try {\n      const body = {\n        payload\n      };\n      const res = await fetch(`${backendBase}/api/clinica/alta`, {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(body)\n      });\n      if (res.status === 202) {\n        alert('Alta enviada (202 Accepted).');\n      } else {\n        const t = await res.text();\n        alert('Error: ' + res.status + ' ' + t);\n      }\n    } catch (e) {\n      console.error(e);\n      alert('Error al enviar');\n    }\n    setLoading(false);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Sesi\\xF3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), session && session.authenticated ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Autenticado como: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: session.nombre || session.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 34\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button-secondary\",\n          onClick: doLogout,\n          children: \"Cerrar sesi\\xF3n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No autenticado. Para pruebas, inicia sesi\\xF3n contra el endpoint central o usa mocks.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"link\",\n          href: `${backendBase}/auth`,\n          children: \"Abrir login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        height: 12\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Alta de Cl\\xEDnica\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-row\",\n        children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n          className: \"input\",\n          rows: 6,\n          value: payload,\n          onChange: e => setPayload(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button-primary\",\n          onClick: sendAlta,\n          disabled: loading,\n          children: loading ? 'Enviando...' : 'Enviar Alta'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button-secondary\",\n          onClick: () => setPayload('{ \"clinic\": \"Mi Clinica\", \"address\": \"Av. Siempreviva 123\" }'),\n          children: \"Reset\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n}\n_s(ClinicAdmin, \"QT3kqvuwJGh+6gruQAAvkR62TKo=\");\n_c = ClinicAdmin;\nexport default ClinicAdmin;\nvar _c;\n$RefreshReg$(_c, \"ClinicAdmin\");","map":{"version":3,"names":["React","useEffect","useState","jsxDEV","_jsxDEV","ClinicAdmin","_s","session","setSession","loading","setLoading","payload","setPayload","backendBase","process","env","REACT_APP_BACKEND_URL","checkSession","res","fetch","credentials","ok","json","e","console","error","doLogout","sendAlta","body","method","headers","JSON","stringify","status","alert","t","text","children","className","fileName","_jsxFileName","lineNumber","columnNumber","authenticated","nombre","username","onClick","href","style","height","rows","value","onChange","target","display","gap","disabled","_c","$RefreshReg$"],"sources":["C:/Users/CaroH/Documents/fing/TSE/lab/componente-periferico/frontend/src/components/ClinicAdmin.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\n\r\nfunction ClinicAdmin(){\r\n  const [session, setSession] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [payload, setPayload] = useState('{ \"clinic\": \"Mi Clinica\", \"address\": \"Av. Siempreviva 123\" }');\r\n  const backendBase = process.env.REACT_APP_BACKEND_URL || 'http://localhost:8080/nodo-periferico';\r\n\r\n  useEffect(()=>{ checkSession(); },[]);\r\n\r\n  async function checkSession(){\r\n    try{\r\n      const res = await fetch(`${backendBase}/api/auth/session`, { credentials: 'include' });\r\n      if(res.ok){\r\n        const json = await res.json();\r\n        setSession(json);\r\n      } else {\r\n        setSession(null);\r\n      }\r\n    }catch(e){ console.error(e); setSession(null); }\r\n  }\r\n\r\n  async function doLogout(){\r\n    await fetch(`${backendBase}/api/auth/logout`, { credentials: 'include' });\r\n    setSession(null);\r\n  }\r\n\r\n  async function sendAlta(){\r\n    setLoading(true);\r\n    try{\r\n      const body = { payload };\r\n      const res = await fetch(`${backendBase}/api/clinica/alta`, {\r\n        method: 'POST',\r\n        credentials: 'include',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(body)\r\n      });\r\n      if(res.status === 202){\r\n        alert('Alta enviada (202 Accepted).');\r\n      } else {\r\n        const t = await res.text();\r\n        alert('Error: ' + res.status + ' ' + t);\r\n      }\r\n    }catch(e){ console.error(e); alert('Error al enviar'); }\r\n    setLoading(false);\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"card\">\r\n        <h2>Sesión</h2>\r\n        {session && session.authenticated ? (\r\n          <div>\r\n            <p>Autenticado como: <strong>{session.nombre || session.username}</strong></p>\r\n            <button className=\"button-secondary\" onClick={doLogout}>Cerrar sesión</button>\r\n          </div>\r\n        ) : (\r\n          <div>\r\n            <p>No autenticado. Para pruebas, inicia sesión contra el endpoint central o usa mocks.</p>\r\n            <a className=\"link\" href={`${backendBase}/auth`}>Abrir login</a>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div style={{height:12}} />\r\n\r\n      <div className=\"card\">\r\n        <h2>Alta de Clínica</h2>\r\n        <div className=\"form-row\">\r\n          <textarea className=\"input\" rows={6} value={payload} onChange={(e)=>setPayload(e.target.value)} />\r\n        </div>\r\n        <div style={{display:'flex', gap:8}}>\r\n          <button className=\"button-primary\" onClick={sendAlta} disabled={loading}>{loading ? 'Enviando...':'Enviar Alta'}</button>\r\n          <button className=\"button-secondary\" onClick={()=>setPayload('{ \"clinic\": \"Mi Clinica\", \"address\": \"Av. Siempreviva 123\" }')}>Reset</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ClinicAdmin;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}